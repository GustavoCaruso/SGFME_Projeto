@page
@model www.Pages.PacienteModel
@{
}

<style>
    .table-responsive {
        overflow-x: auto;
    }
</style>

<form id="pacienteForm" class="container mt-5">
    <!-- Header com ícone e título -->
    <div class="row align-items-center mb-4">
        <div class="col-auto">
            <i class="fas fa-user-injured fa-3x"></i>
        </div>
        <div class="col">
            <h1>Cadastro de Paciente</h1>
            <hr />
        </div>
    </div>









    <h3>Dados Pessoais</h3>

    <!-- Campos do paciente -->
    <div class="row">
        <div class="col-md-2">
            <label for="txtid" class="form-label">Código</label>
            <input type="text" class="form-control" id="txtid" value="0" placeholder="Código" disabled>
        </div>

        <div class="col-md-4">
            <label for="txtnomecompleto" class="form-label">Nome Completo</label>
            <input type="text" class="form-control" id="txtnomecompleto" placeholder="Nome Completo" required>
            <div class="invalid-feedback">Informe o Nome Completo!</div>
        </div>

        <div class="col-md-2">
            <label for="txtpeso" class="form-label">Peso</label>
            <input type="number" class="form-control" id="txtpeso" step="0.01" placeholder="Peso" required>
        </div>

        <div class="col-md-2">
            <label for="txtaltura" class="form-label">Altura</label>
            <input type="number" class="form-control" id="txtaltura" step="0.01" lang="pt-BR" placeholder="Altura" required>
        </div>

        <div class="col-md-2">
            <label for="txtdatanascimento" class="form-label">Data de Nascimento</label>
            <input type="date" class="form-control" id="txtdatanascimento" required>
        </div>

        <div class="col-md-2">
            <label for="txtidade" class="form-label">Idade</label>
            <input type="number" class="form-control" id="txtidade" placeholder="Idade" readonly>
        </div>

        <div class="col-md-4">
            <label for="txtnomemae" class="form-label">Nome da Mãe</label>
            <input type="text" class="form-control" id="txtnomemae" placeholder="Nome da Mãe" required>
        </div>

        <div class="col-md-2">
            <label for="txtrgnumero" class="form-label">Número do RG</label>
            <input type="text" class="form-control" id="txtrgnumero" placeholder="Número do RG" required>
        </div>

        <div class="col-md-2">
            <label for="txtrgdataemissao" class="form-label">Data de Emissão do RG</label>
            <input type="date" class="form-control" id="txtrgdataemissao" required>
        </div>

        <div class="col-md-2">
            <label for="txtrgorgaoexpedidor" class="form-label">Órgão Expedidor do RG</label>
            <input type="text" class="form-control" id="txtrgorgaoexpedidor" placeholder="Órgão Expedidor do RG" required>
        </div>

        <div class="col-md-2">
            <label for="txtrgufemissao" class="form-label">UF de Emissão do RG</label>
            <input type="text" class="form-control" id="txtrgufemissao" placeholder="UF de Emissão do RG" required>
        </div>

        <div class="col-md-4">
            <label for="txtcnsnumero" class="form-label">Número do CNS</label>
            <input type="text" class="form-control" id="txtcnsnumero" placeholder="Número do CNS" required>
        </div>

        <div class="col-md-4">
            <label for="txtcpfnumero" class="form-label">Número do CPF</label>
            <input type="text" class="form-control" id="txtcpfnumero" placeholder="Número do CPF" required>
        </div>

        <div class="col-md-4">
            <label for="txtnomeconjuge" class="form-label">Nome do Cônjuge</label>
            <input type="text" class="form-control" id="txtnomeconjuge" placeholder="Nome do Cônjuge" required>
        </div>

        <div class="col-md-4">
            <label for="txtdatacadastro" class="form-label">Data de Cadastro</label>
            <input type="date" class="form-control" id="txtdatacadastro" readonly>
        </div>
    </div>





    <!-- Campos de contatos -->
    <h3 class="mt-4">Contatos</h3>
    <div class="row mb-3">
        <div class="col-md-6">
            <label for="selectTipoContato" class="form-label">Tipo de Contato</label>
            <select class="form-control" id="selectTipoContato" required>
                <!-- Opções serão carregadas aqui -->
            </select>
        </div>
        <div class="col-md-6">
            <label for="txtValorContato" class="form-label">Valor do Contato</label>
            <input type="text" class="form-control" id="txtValorContato" placeholder="Valor do Contato" required>
        </div>
    </div>
    <div class="row mb-4">
        <div class="col-md-12 text-end">
            <button type="button" class="btn btn-primary" id="btnAdicionarContato">Adicionar Contato</button>
        </div>
    </div>

    <!-- Tabela de Contatos -->
    <div class="table-responsive">
        <table class="table table-bordered" id="contatoTable">
            <thead>
                <tr>
                    <th scope="col">Tipo</th>
                    <th scope="col">Valor</th>
                    <th scope="col">Excluir</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>






    <!-- Campos de Endereço-->

    <h3 class="mt-4">Endereços</h3>
    <div class="row mb-3">
        <div class="col-md-6">
            <label for="selectTipoEndereco" class="form-label">Tipo de Endereço</label>
            <select class="form-control" id="selectTipoEndereco" required>
                <!-- Opções serão carregadas aqui -->
            </select>
        </div>
        <div class="col-md-6">
            <label for="txtlogradouro" class="form-label">Logradouro</label>
            <input type="text" class="form-control" id="txtlogradouro" placeholder="Logradouro" required>
        </div>
    </div>
    <div class="row mb-3">
        <div class="col-md-3">
            <label for="txtnumero" class="form-label">Número</label>
            <input type="text" class="form-control" id="txtnumero" placeholder="Número" required>
        </div>
        <div class="col-md-3">
            <label for="txtcomplemento" class="form-label">Complemento</label>
            <input type="text" class="form-control" id="txtcomplemento" placeholder="Complemento">
        </div>
        <div class="col-md-3">
            <label for="txtbairro" class="form-label">Bairro</label>
            <input type="text" class="form-control" id="txtbairro" placeholder="Bairro" required>
        </div>
        <div class="col-md-3">
            <label for="txtcidade" class="form-label">Cidade</label>
            <input type="text" class="form-control" id="txtcidade" placeholder="Cidade" required>
        </div>
    </div>
    <div class="row mb-4">
        <div class="col-md-3">
            <label for="txtuf" class="form-label">UF</label>
            <input type="text" class="form-control" id="txtuf" placeholder="UF" required>
        </div>
        <div class="col-md-3">
            <label for="txtcep" class="form-label">CEP</label>
            <input type="text" class="form-control" id="txtcep" placeholder="CEP" required>
        </div>
        <div class="col-md-6">
            <label for="txtpontoreferencia" class="form-label">Ponto de Referência</label>
            <input type="text" class="form-control" id="txtpontoreferencia" placeholder="Ponto de Referência">
        </div>
    </div>
    <div class="row mb-4">
        <div class="col-md-12 text-end">
            <button type="button" class="btn btn-primary" id="btnAdicionarEndereco">Adicionar Endereço</button>
        </div>
    </div>

    <div class="table-responsive">
        <table class="table table-bordered" id="enderecoTable">
            <thead>
                <tr>
                    <th scope="col">Tipo</th>
                    <th scope="col">Logradouro</th>
                    <th scope="col">Número</th>
                    <th scope="col">Complemento</th>
                    <th scope="col">Bairro</th>
                    <th scope="col">Cidade</th>
                    <th scope="col">UF</th>
                    <th scope="col">CEP</th>
                    <th scope="col">Ponto de Referência</th>
                    <th scope="col">Excluir</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>


    <div class="row mt-4">
        <div class="col-12 text-end">
            <button type="button" id="btnsalvar" class="btn btn-success">Salvar</button>
            <button type="button" id="btnlimpar" class="btn btn-secondary">Limpar</button>
        </div>
    </div>
</form>

@section Scripts {
    <script src="~/js/Paciente.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Calcular e preencher idade automaticamente
            document.getElementById('txtdatanascimento').addEventListener('change', function () {
                var birthDate = new Date(this.value);
                var now = new Date();
                var age = now.getFullYear() - birthDate.getFullYear();
                if (now.getMonth() < birthDate.getMonth() || (now.getMonth() === birthDate.getMonth() && now.getDate() < birthDate.getDate())) {
                    age--;
                }
                document.getElementById('txtidade').value = age;
            });

            // Preencher data de cadastro automaticamente
            var currentDate = new Date().toISOString().slice(0, 10);
            document.getElementById('txtdatacadastro').value = currentDate;
        });
    </script>
}

